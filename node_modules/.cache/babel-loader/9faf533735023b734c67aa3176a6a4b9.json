{"ast":null,"code":"var _jsxFileName = \"/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles.css\";\nimport { getCollectionsAsync } from \"../api/data.js\";\nimport { getAssetsByCollectionAsync } from \"../api/data.js\";\nimport { getAssetByIdAsync } from \"../api/data.js\";\nimport { faJoint } from \"@fortawesome/free-solid-svg-icons\";\nexport default class CollectionsInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    };\n  }\n\n  componentDidMount() {\n    getCollectionsAsync().then(data => {\n      this.setState({\n        collections: data\n      });\n      data.forEach(collection => {\n        this.props.setDefaultMasterId(collection.id, collection.masterAssetId);\n      });\n    });\n  }\n\n  getRecurName(tag) {\n    if ('subTag' in tag === false) {\n      return tag.name;\n    }\n\n    return `${tag.name} > ${this.getRecurName(tag.subTag)}`;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collectionsInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }\n    }, \"Please select one collection\"), this.state.collections.map(collection => /*#__PURE__*/React.createElement(CollectionCard, {\n      key: collection.id,\n      ID: collection.id,\n      name: collection.name,\n      tag: this.getRecurName(collection.tags),\n      setDataFromCollection: this.props.setDataFromCollection,\n      masterId: this.props.masterIdObj[collection.id] || collection.masterAssetId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nexport function CollectionCard(props) {\n  const [masterPath, setMasterPath] = useState(\"\"); //constructor(props) {\n  //super(props);\n  //this.state = {\n  //  masterPath: \"\"\n  //}\n  //this.handleClick = this.handleClick.bind(this)\n  //}\n\n  const updateCollectionIcon = masterId => {\n    getAssetByIdAsync(masterId).then(data => {\n      setMasterPath({\n        masterPath: \"/images/\" + data.path\n      });\n    });\n  };\n\n  const handleClick = e => {\n    e.preventDefault();\n    let collectionId = this.props.ID;\n    getAssetsByCollectionAsync(collectionId).then(data => {\n      this.props.setDataFromCollection(data);\n    });\n  };\n\n  useEffect(() => {\n    updateCollectionIcon(this.props.masterId);\n  });\n  useEffect(() => {\n    updateCollectionIcon(this.props.masterId);\n  }, [this.props.masterId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, this.props.tag), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"collection-img\",\n    src: masterPath,\n    alt: this.props.name,\n    onClick: handleClick,\n    width: \"150\",\n    height: \"150\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"collection-select\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, this.props.name))));\n}","map":{"version":3,"sources":["/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js"],"names":["React","useState","useEffect","getCollectionsAsync","getAssetsByCollectionAsync","getAssetByIdAsync","faJoint","CollectionsInfo","Component","constructor","props","state","collections","componentDidMount","then","data","setState","forEach","collection","setDefaultMasterId","id","masterAssetId","getRecurName","tag","name","subTag","render","map","tags","setDataFromCollection","masterIdObj","CollectionCard","masterPath","setMasterPath","updateCollectionIcon","masterId","path","handleClick","e","preventDefault","collectionId","ID"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"../styles.css\"\nimport { getCollectionsAsync } from \"../api/data.js\"\nimport { getAssetsByCollectionAsync } from \"../api/data.js\"\nimport { getAssetByIdAsync } from \"../api/data.js\"\nimport { faJoint } from \"@fortawesome/free-solid-svg-icons\"\n\n\nexport default class CollectionsInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    }\n  }\n\n  componentDidMount() {\n    getCollectionsAsync().then((data) => {\n      this.setState({\n        collections: data\n      })\n      data.forEach(collection => {\n        this.props.setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  }\n\n  getRecurName(tag){\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${this.getRecurName(tag.subTag)}`\n  }\n\n  render() {\n    return (\n      <div className=\"collectionsInfo\">\n        <h1>Please select one collection</h1>\n        {this.state.collections.map(collection =>\n          <CollectionCard\n            key={collection.id}\n            ID={collection.id}\n            name={collection.name}\n            tag={this.getRecurName(collection.tags)}\n            setDataFromCollection={this.props.setDataFromCollection}\n            masterId={this.props.masterIdObj[collection.id] || collection.masterAssetId}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport function CollectionCard(props) {\n\n  const [masterPath, setMasterPath] = useState(\"\")\n  //constructor(props) {\n    //super(props);\n    //this.state = {\n    //  masterPath: \"\"\n    //}\n    //this.handleClick = this.handleClick.bind(this)\n  //}\n\n  const updateCollectionIcon = (masterId) => {\n    getAssetByIdAsync(masterId).then((data) => {\n      setMasterPath({ masterPath: \"/images/\" + data.path })\n    })\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    let collectionId = this.props.ID\n    getAssetsByCollectionAsync(collectionId).then((data) => {\n      this.props.setDataFromCollection(data)\n    })\n  }\n\n  useEffect(() => {\n    updateCollectionIcon(this.props.masterId)\n  })\n    \n  useEffect(() => {\n    updateCollectionIcon(this.props.masterId)\n  },[this. props.masterId]) \n    \n    return (\n      <div>\n        <p >{this.props.tag}</p>\n        <div className=\"collection-card\">\n          <img className=\"collection-img\" src={masterPath} alt={this.props.name} onClick={handleClick} width=\"150\" height=\"150\" />\n          <div className=\"collection-detail\">\n            <p className=\"collection-select\" onClick={handleClick}>\n              {this.props.name}\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  \n}"]},"metadata":{},"sourceType":"module"}