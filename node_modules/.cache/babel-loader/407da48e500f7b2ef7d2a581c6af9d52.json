{"ast":null,"code":"var _jsxFileName = \"/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles.css\";\nimport { getCollectionsAsync } from \"../api/data.js\";\nimport { getAssetsByCollectionAsync } from \"../api/data.js\";\nimport { getAssetByIdAsync } from \"../api/data.js\";\n/* \nexport default class CollectionsInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    }\n  }\n\n  componentDidMount() {\n    getCollectionsAsync().then((data) => {\n      this.setState({\n        collections: data\n      })\n      data.forEach(collection => {\n        this.props.setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  }\n\n  getRecurName(tag){\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${this.getRecurName(tag.subTag)}`\n  }\n\n  render() {\n    return (\n      <div className=\"collectionsInfo\">\n        <h1>Please select one collection</h1>\n        {this.state.collections.map(collection =>\n          <CollectionCard\n            key={collection.id}\n            ID={collection.id}\n            name={collection.name}\n            tag={this.getRecurName(collection.tags)}\n            setDataFromCollection={this.props.setDataFromCollection}\n            masterId={this.props.masterIdObj[collection.id] || collection.masterAssetId}\n          />\n        )}\n      </div>\n    )\n  }\n}\n*/\n\nexport default function CollectionsInfo({\n  setDataFromCollection,\n  setDefaultMasterId,\n  masterIdObj\n}) {\n  const [collections, setCollections] = useState([]);\n  useEffect(() => {\n    getCollectionsAsync().then(data => {\n      setCollections(data);\n      data.forEach(collection => {\n        setDefaultMasterId(collection.id, collection.masterAssetId);\n      });\n    });\n  });\n\n  const getRecurName = tag => {\n    if ('subTag' in tag === false) {\n      return tag.name;\n    }\n\n    return `${tag.name} > ${getRecurName(tag.subTag)}`;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collectionsInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Please select one collection\"), collections.map(collection => /*#__PURE__*/React.createElement(CollectionCard, {\n    key: collection.id,\n    ID: collection.id,\n    name: collection.name,\n    tag: getRecurName(collection.tags),\n    setDataFromCollection: setDataFromCollection,\n    masterId: masterIdObj[collection.id] || collection.masterAssetId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  })));\n}\nexport const CollectionCard = props => {\n  const [masterPath, setMasterPath] = useState(\"\");\n\n  const handleClick = e => {\n    e.preventDefault();\n    let collectionId = props.ID;\n    getAssetsByCollectionAsync(collectionId).then(data => {\n      props.setDataFromCollection(data);\n    });\n  };\n\n  useEffect(() => {\n    getAssetByIdAsync(props.masterId).then(data => {\n      setMasterPath(\"/images/\" + data.path);\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, props.tag), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"collection-img\",\n    src: masterPath,\n    alt: props.name,\n    onClick: handleClick,\n    width: \"150\",\n    height: \"150\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"collection-select\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, props.name))));\n};","map":{"version":3,"sources":["/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js"],"names":["React","useState","useEffect","getCollectionsAsync","getAssetsByCollectionAsync","getAssetByIdAsync","CollectionsInfo","setDataFromCollection","setDefaultMasterId","masterIdObj","collections","setCollections","then","data","forEach","collection","id","masterAssetId","getRecurName","tag","name","subTag","map","tags","CollectionCard","props","masterPath","setMasterPath","handleClick","e","preventDefault","collectionId","ID","masterId","path"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,eAAP;AACA,SAASC,mBAAT,QAAoC,gBAApC;AACA,SAASC,0BAAT,QAA2C,gBAA3C;AACA,SAASC,iBAAT,QAAkC,gBAAlC;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,eAAe,SAASC,eAAT,CAA0B;AAACC,EAAAA,qBAAD;AAAwBC,EAAAA,kBAAxB;AAA4CC,EAAAA;AAA5C,CAA1B,EAAoF;AACjG,QAAM,CAAEC,WAAF,EAAeC,cAAf,IAAkCV,QAAQ,CAAC,EAAD,CAAhD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,mBAAmB,GAAGS,IAAtB,CAA4BC,IAAD,IAAU;AACnCF,MAAAA,cAAc,CAACE,IAAD,CAAd;AACAA,MAAAA,IAAI,CAACC,OAAL,CAAaC,UAAU,IAAI;AACzBP,QAAAA,kBAAkB,CAACO,UAAU,CAACC,EAAZ,EAAgBD,UAAU,CAACE,aAA3B,CAAlB;AACD,OAFD;AAGD,KALD;AAMD,GAPQ,CAAT;;AASA,QAAMC,YAAY,GAAIC,GAAD,IAAS;AAC5B,QAAG,YAAYA,GAAZ,KAAoB,KAAvB,EAA6B;AAC3B,aAAOA,GAAG,CAACC,IAAX;AACD;;AACD,WAAQ,GAAED,GAAG,CAACC,IAAK,MAAKF,YAAY,CAACC,GAAG,CAACE,MAAL,CAAa,EAAjD;AACD,GALD;;AAOA,sBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,EAEGX,WAAW,CAACY,GAAZ,CAAgBP,UAAU,iBACzB,oBAAC,cAAD;AACE,IAAA,GAAG,EAAEA,UAAU,CAACC,EADlB;AAEE,IAAA,EAAE,EAAED,UAAU,CAACC,EAFjB;AAGE,IAAA,IAAI,EAAED,UAAU,CAACK,IAHnB;AAIE,IAAA,GAAG,EAAEF,YAAY,CAACH,UAAU,CAACQ,IAAZ,CAJnB;AAKE,IAAA,qBAAqB,EAAEhB,qBALzB;AAME,IAAA,QAAQ,EAAEE,WAAW,CAACM,UAAU,CAACC,EAAZ,CAAX,IAA8BD,UAAU,CAACE,aANrD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAFH,CADF;AAgBD;AAED,OAAO,MAAMO,cAAc,GAAGC,KAAK,IAAK;AAEtC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,EAAD,CAA5C;;AAEA,QAAM2B,WAAW,GAAIC,CAAD,IAAO;AACzBA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,YAAY,GAAGN,KAAK,CAACO,EAAzB;AACA5B,IAAAA,0BAA0B,CAAC2B,YAAD,CAA1B,CAAyCnB,IAAzC,CAA+CC,IAAD,IAAU;AACtDY,MAAAA,KAAK,CAAClB,qBAAN,CAA4BM,IAA5B;AACD,KAFD;AAGD,GAND;;AAQAX,EAAAA,SAAS,CAAC,MAAM;AACdG,IAAAA,iBAAiB,CAACoB,KAAK,CAACQ,QAAP,CAAjB,CAAkCrB,IAAlC,CAAwCC,IAAD,IAAU;AACjDc,MAAAA,aAAa,CAAC,aAAad,IAAI,CAACqB,IAAnB,CAAb;AACC,KAFD;AAGD,GAJQ,CAAT;AAME,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKT,KAAK,CAACN,GAAX,CADF,eAEE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAgC,IAAA,GAAG,EAAEO,UAArC;AAAiD,IAAA,GAAG,EAAED,KAAK,CAACL,IAA5D;AAAkE,IAAA,OAAO,EAAEQ,WAA3E;AAAwF,IAAA,KAAK,EAAC,KAA9F;AAAoG,IAAA,MAAM,EAAC,KAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,mBAAb;AAAiC,IAAA,OAAO,EAAEA,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,KAAK,CAACL,IADT,CADF,CAFF,CAFF,CADF;AAcH,CAhCM","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"../styles.css\"\nimport { getCollectionsAsync } from \"../api/data.js\"\nimport { getAssetsByCollectionAsync } from \"../api/data.js\"\nimport { getAssetByIdAsync } from \"../api/data.js\"\n\n\n/* \nexport default class CollectionsInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    }\n  }\n\n  componentDidMount() {\n    getCollectionsAsync().then((data) => {\n      this.setState({\n        collections: data\n      })\n      data.forEach(collection => {\n        this.props.setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  }\n\n  getRecurName(tag){\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${this.getRecurName(tag.subTag)}`\n  }\n\n  render() {\n    return (\n      <div className=\"collectionsInfo\">\n        <h1>Please select one collection</h1>\n        {this.state.collections.map(collection =>\n          <CollectionCard\n            key={collection.id}\n            ID={collection.id}\n            name={collection.name}\n            tag={this.getRecurName(collection.tags)}\n            setDataFromCollection={this.props.setDataFromCollection}\n            masterId={this.props.masterIdObj[collection.id] || collection.masterAssetId}\n          />\n        )}\n      </div>\n    )\n  }\n}\n*/\n\nexport default function CollectionsInfo ({setDataFromCollection, setDefaultMasterId, masterIdObj}) {\n  const [ collections, setCollections ] = useState([])\n\n  useEffect(() => {\n    getCollectionsAsync().then((data) => {\n      setCollections(data)\n      data.forEach(collection => {\n        setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  })\n\n  const getRecurName = (tag) => {\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${getRecurName(tag.subTag)}`\n  }\n\n  return (\n    <div className=\"collectionsInfo\">\n      <h1>Please select one collection</h1>\n      {collections.map(collection =>\n        <CollectionCard\n          key={collection.id}\n          ID={collection.id}\n          name={collection.name}\n          tag={getRecurName(collection.tags)}\n          setDataFromCollection={setDataFromCollection}\n          masterId={masterIdObj[collection.id] || collection.masterAssetId}\n        />\n      )}\n    </div>\n  )\n\n} \n\nexport const CollectionCard = props =>  {\n\n  const [masterPath, setMasterPath] = useState(\"\")\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    let collectionId = props.ID\n    getAssetsByCollectionAsync(collectionId).then((data) => {\n      props.setDataFromCollection(data)\n    })\n  }\n\n  useEffect(() => {\n    getAssetByIdAsync(props.masterId).then((data) => {\n    setMasterPath(\"/images/\" + data.path )\n    })\n  })\n    \n    return (\n      <div>\n        <p >{props.tag}</p>\n        <div className=\"collection-card\">\n          <img className=\"collection-img\" src={masterPath} alt={props.name} onClick={handleClick} width=\"150\" height=\"150\" />\n          <div className=\"collection-detail\">\n            <p className=\"collection-select\" onClick={handleClick}>\n              {props.name}\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  \n}"]},"metadata":{},"sourceType":"module"}