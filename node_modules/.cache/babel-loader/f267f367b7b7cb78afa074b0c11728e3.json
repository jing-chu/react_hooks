{"ast":null,"code":"var _jsxFileName = \"/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles.css\";\nimport { getCollectionsAsync } from \"../api/data.js\";\nimport { getAssetsByCollectionAsync } from \"../api/data.js\";\nimport { getAssetByIdAsync } from \"../api/data.js\";\nexport default function CollectionsInfo({\n  setDataFromCollection,\n  setDefaultMasterId,\n  masterIdObj\n}) {\n  const [collections, setCollections] = useState([]);\n  useEffect(() => {\n    getCollectionsAsync().then(data => {\n      setCollections(data);\n      data.forEach(collection => {\n        setDefaultMasterId(collection.id, collection.masterAssetId);\n      });\n    });\n  }, [setDefaultMasterId]);\n\n  const getRecurName = tag => {\n    if ('subTag' in tag === false) {\n      return tag.name;\n    }\n\n    return `${tag.name} > ${getRecurName(tag.subTag)}`;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collectionsInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, \"Please select one collection\"), collections.map(collection => /*#__PURE__*/React.createElement(CollectionCard, {\n    key: collection.id,\n    ID: collection.id,\n    name: collection.name,\n    tag: getRecurName(collection.tags),\n    setDataFromCollection: setDataFromCollection,\n    masterId: masterIdObj[collection.id] || collection.masterAssetId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  })));\n}\nexport const CollectionCard = ({\n  ID,\n  name,\n  tag,\n  setDataFromCollection,\n  masterId\n}) => {\n  const [masterPath, setMasterPath] = useState(\"\");\n\n  const handleClick = e => {\n    e.preventDefault();\n    let collectionId = ID;\n    getAssetsByCollectionAsync(collectionId).then(data => {\n      setDataFromCollection(data);\n    });\n  };\n\n  useEffect(() => {\n    getAssetByIdAsync(masterId).then(data => {\n      setMasterPath(\"/images/\" + data.path);\n    });\n  }, [masterId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, tag), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"collection-img\",\n    src: masterPath,\n    alt: name,\n    onClick: handleClick,\n    width: \"150\",\n    height: \"150\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collection-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"collection-select\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, name))));\n};","map":{"version":3,"sources":["/Users/xiongjieyi/repositories/react_hooks/src/components/CollectionsInfo.js"],"names":["React","useState","useEffect","getCollectionsAsync","getAssetsByCollectionAsync","getAssetByIdAsync","CollectionsInfo","setDataFromCollection","setDefaultMasterId","masterIdObj","collections","setCollections","then","data","forEach","collection","id","masterAssetId","getRecurName","tag","name","subTag","map","tags","CollectionCard","ID","masterId","masterPath","setMasterPath","handleClick","e","preventDefault","collectionId","path"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"../styles.css\"\nimport { getCollectionsAsync } from \"../api/data.js\"\nimport { getAssetsByCollectionAsync } from \"../api/data.js\"\nimport { getAssetByIdAsync } from \"../api/data.js\"\n\n\nexport default function CollectionsInfo ({setDataFromCollection, setDefaultMasterId, masterIdObj}) {\n  const [ collections, setCollections ] = useState([])\n\n  useEffect(() => {\n    getCollectionsAsync().then((data) => {\n      setCollections(data)\n      data.forEach(collection => {\n        setDefaultMasterId(collection.id, collection.masterAssetId)\n      })\n    })\n  },[setDefaultMasterId])\n\n  const getRecurName = (tag) => {\n    if('subTag' in tag === false){\n      return tag.name\n    }\n    return `${tag.name} > ${getRecurName(tag.subTag)}`\n  }\n\n  return (\n    <div className=\"collectionsInfo\">\n      <h1>Please select one collection</h1>\n      {collections.map(collection =>\n        <CollectionCard\n          key={collection.id}\n          ID={collection.id}\n          name={collection.name}\n          tag={getRecurName(collection.tags)}\n          setDataFromCollection={setDataFromCollection}\n          masterId={masterIdObj[collection.id] || collection.masterAssetId}\n        />\n      )}\n    </div>\n  )\n\n} \n\nexport const CollectionCard = ({ID,name,tag,setDataFromCollection,masterId}) =>  {\n\n  const [masterPath, setMasterPath] = useState(\"\")\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    let collectionId = ID\n    getAssetsByCollectionAsync(collectionId).then((data) => {\n      setDataFromCollection(data)\n    })\n  }\n\n\n  useEffect(() => {\n    getAssetByIdAsync(masterId).then((data) => {\n    setMasterPath(\"/images/\" + data.path )\n    })\n  },[masterId])\n    \n    return (\n      <div>\n        <p >{tag}</p>\n        <div className=\"collection-card\">\n          <img className=\"collection-img\" src={masterPath} alt={name} onClick={handleClick} width=\"150\" height=\"150\" />\n          <div className=\"collection-detail\">\n            <p className=\"collection-select\" onClick={handleClick}>\n              {name}\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  \n}"]},"metadata":{},"sourceType":"module"}